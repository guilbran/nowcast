---
title: "Nowcasting Package: how to use?"
author: "Guilherme Branco Gomes"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This package contains a collection of function to estimate forecasts for the near futures or the recent past, in other words nowcasting. The econometric framework is a model of state spaces with maney variables and commom components, the Dynamic Factor Model.
In this first version we focus on the problem when the variable of interest is a quarterly time series and the regressor are monthly time series.

## Dynamic Factor Model

This model can be specified in a space state representation:
$$X_t = C F_t + e_t$$
$$ F_{t} = \sum_{k=1}^p (A_{j}L^kF_t) + Bu_t$$
where:

* $X_t$ is a vector with $n$ observable series, $F_t$ is a vector with $r$ latent series called commom factors;
* $e_t$ is a vector of $n$ idiosyncratic component, $u_t$ is a vector of $q$ commom shocks;
* $C$ is a $n \times r$ matrix, $A_j$ is a $r \times r$ matrix, $L$ is the lag operator, $B$ is a $r\times q$ matrix.

For more details about the specifications of this model see the survey (Stock and Watson 2011)


## Mixed Frequency

How treat mixed frequency, when we are interest in quarterly estimation using monthly variables.
Murasawa e Mariano 2003 approximation, bridge equation and EM

## Models

Little words about each method of estimation

### Two Stages - with quarterly factors

### Two Stages - with monthly factors

### Expected Maximization


## Data extraction and annalysis

### BRGDP

This is a panel containning a piece of the information for Brazilian economic activity extracted in 17/08/2017. It is available for practice and offline examples. The time series are encoded as in the [Brazilian Central Bank Time Series Management System v2.1](https://www3.bcb.gov.br/sgspub/).

* United States dollar (1); 
* Interest rate - CDI (12); 
* Vehicles production (1373); 
* Credit Sales Index (1453); 
* Retail sales (1455); 
* Current economic conditions index (4394); 
* Industrial production, general index (21859)
* Quarterly GDP - observed data - GDP at market prices (22099)

Example of some series:

```{r, echo=FALSE, results='asis'}
BRGDP<-nowcasting::BRGDP
datas<-zoo::as.Date(BRGDP)
df<-data.frame(BRGDP)
row.names(df)<-datas
knitr::kable(tail(data.frame(df[,5:8]),7),row.names = T)
```

### USGDP

This dataset contain informations for US economy available in [replication files](https://www.newyorkfed.org/research/economists/giannone/pub) of the seminal paper. It is a list with 2 data.frames.

#### USGDP$Base

It contains the time series with its values. Example of some series:

```{r, echo=FALSE, results='asis'}
USGDP<-nowcasting::USGDP
datas<-zoo::as.Date(USGDP$Base)
df<-data.frame(USGDP$Base)
row.names(df)<-datas
knitr::kable(tail(data.frame(df[,1:5]),5),row.names = T)
```

#### USGDP$Legenda

It contains the legend with the specifications of the model and the series. Example of some series:

```{r, echo=FALSE, results='asis'}
USGDP<-nowcasting::USGDP
df<-USGDP$Legenda
knitr::kable(tail(data.frame(df[,1:5]),5),row.names = T)
```

### Ba


### month2qtr

This function transforms monthly in quarterly time series only choosing the value of the last month of the quarter to represent it.

Example:

```{r}
gdp_month<-BRGDP[,'serie22099']
window(gdp_month,c(2016,1),frequency=12)
```

```{r}
gdp_qtr<-nowcasting::month2qtr(gdp_month)
window(gdp_qtr,c(2016,1),frequency=4)
```

### qtr2month

This function transforms quarterly in monthly time series doing the opposite process of `month2qtr` function.

Example:

```{r}
gdp_month2<-nowcasting::qtr2month(gdp_qtr)
window(gdp_month2,c(2016,1),frequency=12)
```





